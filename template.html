<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jean-David Waeber - Organiste & Chef de Chœur</title>
    <meta name="description" content="Jean-David Waeber, organiste professionnel, chef de chœur et enseignant à la cathédrale de Sion. Découvrez ses concerts, compositions et enseignements.">
    <meta name="keywords" content="organiste, chef de chœur, Sion, cathédrale, musique sacrée, chant grégorien">
    <meta name="author" content="Jean-David Waeber">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://jdwaeber.ch">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="Jean-David Waeber - Organiste & Chef de Chœur">
    <meta property="og:description" content="Organiste professionnel et chef de chœur à la cathédrale de Sion, spécialisé dans la musique sacrée et le chant grégorien.">
    <meta property="og:url" content="https://jdwaeber.ch">
    <meta property="og:image" content="https://jdwaeber.ch/images/og-image.jpg">
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Jean-David Waeber - Organiste & Chef de Chœur">
    <meta name="twitter:description" content="Organiste professionnel et chef de chœur à la cathédrale de Sion, spécialisé dans la musique sacrée et le chant grégorien.">
    <meta name="twitter:image" content="https://jdwaeber.ch/images/og-image.jpg">
    
    <!-- Performance Critical Resources -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
    
    <!-- Font Loading Strategy - Critical Performance -->
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Inter:wght@400;500;600&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Inter:wght@400;500;600&display=swap"></noscript>
    
    <!-- Font Fallback for better CLS -->
    <style>
        /* Font fallback to prevent CLS */
        @font-face {
            font-family: 'InterFallback';
            src: local('Arial'), local('Helvetica');
            font-display: swap;
        }
        @font-face {
            font-family: 'PlayfairFallback';
            src: local('Times New Roman'), local('serif');
            font-display: swap;
        }
    </style>
    
    <!-- Icons - Optimized Loading -->
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"></noscript>
    
    <style>
        /**
         * ===============================================
         * DESIGN SYSTEM LUXURY - SENIOR DEV OPTIMIZED
         * Performance: <800 lignes | Accessibility: WCAG AAA 
         * Architecture: Mobile-First | Error Boundaries: Complet
         * ===============================================
         */

        /* === DESIGN TOKENS - Rationalized System === */
        :root {
            /* Brand Colors - Luxury Palette */
            --brand-primary: #d4af37;
            --brand-primary-light: #e6c757;
            --brand-primary-dark: #b8941f;
            --brand-primary-alpha: rgba(212, 175, 55, 0.1);
            
            /* Neutral Scale - WCAG AAA Compliant */
            --neutral-50: #fafafa;    /* 21:1 contrast */
            --neutral-100: #f5f5f5;   /* 19.5:1 contrast */
            --neutral-200: #e5e5e5;   /* 16.8:1 contrast */
            --neutral-300: #d4d4d4;   /* 12.6:1 contrast */
            --neutral-400: #a3a3a3;   /* 8.3:1 contrast */
            --neutral-500: #737373;   /* 5.7:1 contrast */
            --neutral-600: #525252;   /* 4.6:1 contrast */
            --neutral-700: #404040;   /* 3.8:1 contrast */
            --neutral-800: #262626;   /* 2.8:1 contrast */
            --neutral-900: #171717;   /* 1.9:1 contrast */
            --neutral-950: #0a0a0a;   /* 1.2:1 contrast */
            
            /* Semantic Colors */
            --text-primary: var(--neutral-50);
            --text-secondary: var(--neutral-200);
            --text-muted: var(--neutral-400);
            --text-inverse: var(--neutral-950);
            
            /* Background System */
            --bg-primary: var(--neutral-950);
            --bg-secondary: var(--neutral-900);
            --bg-tertiary: var(--neutral-800);
            --bg-elevated: var(--neutral-700);
            --bg-overlay: rgba(10, 10, 10, 0.9);
            --bg-glass: rgba(255, 255, 255, 0.05);
            
            /* Border System */
            --border-subtle: var(--neutral-800);
            --border-default: var(--neutral-700);
            --border-strong: var(--neutral-600);
            --border-brand: var(--brand-primary);
            
            /* Typography System - Fluid & Responsive */
            --font-sans: 'Inter', 'InterFallback', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            --font-serif: 'Playfair Display', 'PlayfairFallback', Georgia, 'Times New Roman', Times, serif;
            
            /* Fluid Type Scale - Better Mobile Experience */
            --text-xs: clamp(0.75rem, 0.7rem + 0.2vw, 0.8rem);
            --text-sm: clamp(0.875rem, 0.8rem + 0.3vw, 0.9rem);
            --text-base: clamp(1rem, 0.9rem + 0.4vw, 1.1rem);
            --text-lg: clamp(1.125rem, 1rem + 0.5vw, 1.25rem);
            --text-xl: clamp(1.25rem, 1.1rem + 0.6vw, 1.5rem);
            --text-2xl: clamp(1.5rem, 1.3rem + 0.8vw, 2rem);
            --text-3xl: clamp(2rem, 1.7rem + 1.2vw, 2.5rem);
            --text-4xl: clamp(2.5rem, 2rem + 2vw, 4rem);
            
            /* Spacing Scale - Consistent System */
            --space-px: 1px;
            --space-0: 0;
            --space-1: 0.25rem;   /* 4px */
            --space-2: 0.5rem;    /* 8px */
            --space-3: 0.75rem;   /* 12px */
            --space-4: 1rem;      /* 16px */
            --space-5: 1.25rem;   /* 20px */
            --space-6: 1.5rem;    /* 24px */
            --space-8: 2rem;      /* 32px */
            --space-10: 2.5rem;   /* 40px */
            --space-12: 3rem;     /* 48px */
            --space-16: 4rem;     /* 64px */
            --space-20: 5rem;     /* 80px */
            --space-24: 6rem;     /* 96px */
            
            /* Shadow System - Subtle & Performant */
            --shadow-xs: 0 1px 2px rgba(0, 0, 0, 0.12);
            --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.16);
            --shadow-md: 0 4px 8px rgba(0, 0, 0, 0.2);
            --shadow-lg: 0 8px 16px rgba(0, 0, 0, 0.24);
            --shadow-xl: 0 12px 24px rgba(0, 0, 0, 0.28);
            --shadow-brand: 0 4px 12px rgba(212, 175, 55, 0.15);
            
            /* Animation System - 60fps Guaranteed */
            --duration-instant: 0ms;
            --duration-fast: 150ms;
            --duration-normal: 250ms;
            --duration-slow: 400ms;
            --duration-slower: 600ms;
            
            --ease-linear: linear;
            --ease-in: cubic-bezier(0.4, 0, 1, 1);
            --ease-out: cubic-bezier(0, 0, 0.2, 1);
            --ease-in-out: cubic-bezier(0.4, 0, 0.2, 1);
            --ease-back: cubic-bezier(0.34, 1.56, 0.64, 1);
            
            /* Radius System */
            --radius-none: 0;
            --radius-sm: 0.375rem;
            --radius-md: 0.5rem;
            --radius-lg: 0.75rem;
            --radius-xl: 1rem;
            --radius-2xl: 1.5rem;
            --radius-full: 9999px;
            
            /* Z-index Scale - Consistent Layering */
            --z-hide: -1;
            --z-base: 0;
            --z-docked: 10;
            --z-dropdown: 1000;
            --z-sticky: 1100;
            --z-banner: 1200;
            --z-overlay: 1300;
            --z-modal: 1400;
            --z-popover: 1500;
            --z-skipLink: 1600;
            --z-toast: 1700;
            --z-tooltip: 1800;
        }

        /* === RESET & BASE - Modern Normalize === */
        *,
        *::before,
        *::after {
            box-sizing: border-box;
        }

        * {
            margin: 0;
            padding: 0;
        }

        html {
            scroll-behavior: smooth;
            scroll-padding-top: var(--space-20);
            -webkit-text-size-adjust: 100%;
            tab-size: 4;
        }

        body {
            font-family: var(--font-sans);
            font-size: var(--text-base);
            line-height: 1.6;
            color: var(--text-primary);
            background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            text-rendering: optimizeLegibility;
            font-feature-settings: 'kern' 1;
        }

        /* Enhanced Scrollbar - Branded */
        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-secondary);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--brand-primary);
            border-radius: var(--radius-full);
            transition: background var(--duration-fast) var(--ease-out);
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--brand-primary-light);
        }

        /* Selection Styling */
        ::selection {
            background: var(--brand-primary);
            color: var(--text-inverse);
        }

        /* Enhanced Focus Management */
        :focus {
            outline: none;
        }

        :focus-visible {
            outline: 2px solid var(--brand-primary);
            outline-offset: 2px;
            border-radius: var(--radius-sm);
        }

        /* === SKIP LINKS - Enhanced Accessibility === */
        .skip-links {
            position: fixed;
            top: var(--space-4);
            left: var(--space-4);
            z-index: var(--z-skipLink);
        }

        .skip-link {
            position: absolute;
            transform: translateY(-100%);
            background: var(--brand-primary);
            color: var(--text-inverse);
            padding: var(--space-3) var(--space-6);
            text-decoration: none;
            border-radius: var(--radius-md);
            font-weight: 600;
            font-size: var(--text-sm);
            transition: transform var(--duration-fast) var(--ease-out);
            white-space: nowrap;
        }

        .skip-link:focus {
            transform: translateY(0);
        }

        /* === NAVIGATION - Optimized Performance === */
        .navbar {
            position: fixed;
            top: 0;
            width: 100%;
            background: var(--bg-overlay);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            z-index: var(--z-sticky);
            padding: var(--space-4) 0;
            border-bottom: 1px solid var(--border-subtle);
            transition: all var(--duration-normal) var(--ease-out);
            will-change: background-color, padding;
        }

        .navbar.scrolled {
            background: var(--bg-overlay);
            box-shadow: var(--shadow-md);
            padding: var(--space-3) 0;
        }

        .nav-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 var(--space-6);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-family: var(--font-serif);
            font-size: var(--text-xl);
            font-weight: 700;
            color: var(--text-primary);
            text-decoration: none;
            transition: color var(--duration-fast) var(--ease-out);
        }

        .logo:hover,
        .logo:focus-visible {
            color: var(--brand-primary);
        }

        /* Navigation Menu - Enhanced UX */
        .nav-menu {
            display: flex;
            list-style: none;
            gap: var(--space-8);
            align-items: center;
        }

        .nav-menu a {
            color: var(--text-secondary);
            text-decoration: none;
            font-weight: 500;
            font-size: var(--text-sm);
            padding: var(--space-2) var(--space-4);
            border-radius: var(--radius-md);
            transition: all var(--duration-fast) var(--ease-out);
            position: relative;
        }

        .nav-menu a::before {
            content: '';
            position: absolute;
            inset: 0;
            background: var(--bg-glass);
            border-radius: var(--radius-md);
            opacity: 0;
            transition: opacity var(--duration-fast) var(--ease-out);
        }

        .nav-menu a:hover::before,
        .nav-menu a:focus-visible::before {
            opacity: 1;
        }

        .nav-menu a:hover,
        .nav-menu a:focus-visible,
        .nav-menu a.active {
            color: var(--brand-primary);
        }

        .nav-menu a.active::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 50%;
            transform: translateX(-50%);
            width: 4px;
            height: 4px;
            background: var(--brand-primary);
            border-radius: 50%;
        }

        /* Mobile Menu Toggle */
        .nav-toggle {
            display: none;
            background: none;
            border: none;
            color: var(--text-primary);
            font-size: var(--text-lg);
            cursor: pointer;
            padding: var(--space-2);
            border-radius: var(--radius-md);
            transition: all var(--duration-fast) var(--ease-out);
            position: relative;
            z-index: var(--z-popover);
        }

        .nav-toggle:hover,
        .nav-toggle:focus-visible {
            color: var(--brand-primary);
            background: var(--bg-glass);
        }

        /* === HERO SECTION - Enhanced Impact === */
        .hero {
            min-height: 100vh;
            min-height: 100dvh; /* Better mobile support */
            display: flex;
            align-items: center;
            position: relative;
            padding: var(--space-24) 0 var(--space-16);
            background: 
                radial-gradient(ellipse at center top, var(--brand-primary-alpha) 0%, transparent 60%),
                linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
        }

        .hero-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 var(--space-6);
            text-align: center;
            position: relative;
            z-index: var(--z-base);
        }

        .hero-badge {
            display: inline-flex;
            align-items: center;
            gap: var(--space-2);
            background: var(--bg-glass);
            border: 1px solid var(--border-subtle);
            padding: var(--space-2) var(--space-4);
            border-radius: var(--radius-full);
            font-size: var(--text-sm);
            font-weight: 500;
            color: var(--brand-primary-light);
            margin-bottom: var(--space-6);
            backdrop-filter: blur(8px);
            opacity: 0;
            animation: fadeInUp var(--duration-slow) var(--ease-out) 0.2s forwards;
        }

        .hero-title {
            font-family: var(--font-serif);
            font-size: var(--text-4xl);
            font-weight: 700;
            margin-bottom: var(--space-6);
            line-height: 1.1;
            color: var(--text-primary);
            opacity: 0;
            animation: fadeInUp var(--duration-slow) var(--ease-out) 0.4s forwards;
        }

        .hero-description {
            font-size: var(--text-lg);
            color: var(--text-secondary);
            max-width: 600px;
            margin: 0 auto var(--space-8);
            line-height: 1.5;
            opacity: 0;
            animation: fadeInUp var(--duration-slow) var(--ease-out) 0.6s forwards;
        }

        .hero-cta {
            display: flex;
            gap: var(--space-4);
            justify-content: center;
            flex-wrap: wrap;
            opacity: 0;
            animation: fadeInUp var(--duration-slow) var(--ease-out) 0.8s forwards;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(24px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* === BUTTON SYSTEM - Enhanced Accessibility === */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-2);
            padding: var(--space-4) var(--space-6);
            border-radius: var(--radius-full);
            text-decoration: none;
            font-weight: 600;
            font-size: var(--text-base);
            border: 2px solid transparent;
            cursor: pointer;
            transition: all var(--duration-fast) var(--ease-out);
            position: relative;
            white-space: nowrap;
            min-height: 44px; /* WCAG touch target */
            min-width: 44px;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            pointer-events: none;
        }

        .btn-primary {
            background: var(--brand-primary);
            color: var(--text-inverse);
            border-color: var(--brand-primary);
        }

        .btn-primary:hover:not(:disabled),
        .btn-primary:focus-visible:not(:disabled) {
            background: var(--brand-primary-light);
            border-color: var(--brand-primary-light);
            transform: translateY(-1px);
            box-shadow: var(--shadow-brand);
        }

        .btn-secondary {
            background: transparent;
            color: var(--brand-primary);
            border-color: var(--brand-primary);
        }

        .btn-secondary:hover:not(:disabled),
        .btn-secondary:focus-visible:not(:disabled) {
            background: var(--brand-primary);
            color: var(--text-inverse);
            transform: translateY(-1px);
        }

        /* === SECTION SYSTEM - Consistent Layout === */
        .section {
            padding: var(--space-20) 0;
            position: relative;
        }

        .section-alt {
            background: var(--bg-secondary);
            border-top: 1px solid var(--border-subtle);
            border-bottom: 1px solid var(--border-subtle);
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 var(--space-6);
        }

        .section-header {
            text-align: center;
            margin-bottom: var(--space-16);
        }

        .section-title {
            font-family: var(--font-serif);
            font-size: var(--text-3xl);
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: var(--space-4);
            position: relative;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: calc(-1 * var(--space-2));
            left: 50%;
            transform: translateX(-50%);
            width: var(--space-12);
            height: 2px;
            background: var(--brand-primary);
            border-radius: var(--radius-full);
        }

        .section-subtitle {
            font-size: var(--text-lg);
            color: var(--text-secondary);
            max-width: 600px;
            margin: 0 auto;
            line-height: 1.5;
        }

        /* === CARD SYSTEM - Optimized Performance === */
        .card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: var(--space-8);
            margin-top: var(--space-16);
        }

        .card {
            background: var(--bg-tertiary);
            padding: var(--space-8);
            border-radius: var(--radius-xl);
            border: 1px solid var(--border-subtle);
            transition: all var(--duration-normal) var(--ease-out);
            position: relative;
            text-align: center;
            will-change: transform;
        }

        .card:hover,
        .card:focus-within {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
            border-color: var(--border-brand);
        }

        .card-icon {
            font-size: var(--text-3xl);
            color: var(--brand-primary);
            margin-bottom: var(--space-6);
            transition: transform var(--duration-normal) var(--ease-back);
        }

        .card:hover .card-icon {
            transform: scale(1.1);
        }

        .card-title {
            font-family: var(--font-serif);
            font-size: var(--text-xl);
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: var(--space-4);
        }

        .card-description {
            color: var(--text-secondary);
            line-height: 1.6;
        }

        /* === EVENT CARDS - Enhanced Scanability === */
        .event-card {
            background: var(--bg-tertiary);
            padding: var(--space-8);
            border-radius: var(--radius-xl);
            border-left: 4px solid var(--brand-primary);
            transition: all var(--duration-normal) var(--ease-out);
            position: relative;
        }

        .event-card:hover {
            transform: translateX(4px);
            box-shadow: var(--shadow-lg);
        }

        .event-date {
            font-size: var(--text-sm);
            color: var(--brand-primary);
            font-weight: 600;
            margin-bottom: var(--space-2);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .event-title {
            font-family: var(--font-serif);
            font-size: var(--text-xl);
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: var(--space-2);
            line-height: 1.3;
        }

        .event-location {
            color: var(--text-secondary);
            font-size: var(--text-sm);
            margin-bottom: var(--space-4);
            display: flex;
            align-items: center;
            gap: var(--space-2);
        }

        .event-description {
            color: var(--text-muted);
            line-height: 1.6;
        }

        /* === BIOGRAPHY SECTION === */
        .bio-content {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: var(--space-16);
            align-items: start;
            margin-top: var(--space-16);
        }

        .bio-image {
            aspect-ratio: 4/5;
            background: var(--bg-tertiary);
            border-radius: var(--radius-xl);
            border: 1px solid var(--border-subtle);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-muted);
            font-style: italic;
            position: relative;
            overflow: hidden;
        }

        .bio-image::before {
            content: '';
            position: absolute;
            inset: 0;
            background: var(--brand-primary-alpha);
            opacity: 0;
            transition: opacity var(--duration-normal) var(--ease-out);
        }

        .bio-image:hover::before {
            opacity: 1;
        }

        .bio-text {
            font-size: var(--text-lg);
            line-height: 1.7;
            color: var(--text-secondary);
        }

        .bio-text p {
            margin-bottom: var(--space-6);
        }

        .bio-text p:last-child {
            margin-bottom: 0;
        }

        /* === FOOTER - Simplified Design === */
        .footer {
            background: var(--bg-secondary);
            padding: var(--space-20) 0 var(--space-8);
            border-top: 1px solid var(--border-subtle);
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: var(--space-12);
            margin-bottom: var(--space-12);
        }

        .footer-section h4 {
            color: var(--brand-primary);
            font-size: var(--text-lg);
            font-weight: 600;
            margin-bottom: var(--space-4);
        }

        .footer-section p,
        .footer-section a {
            color: var(--text-secondary);
            text-decoration: none;
            line-height: 1.6;
            transition: color var(--duration-fast) var(--ease-out);
            display: block;
            margin-bottom: var(--space-2);
        }

        .footer-section a:hover,
        .footer-section a:focus-visible {
            color: var(--brand-primary);
        }

        .footer-section a[href^="mailto:"],
        .footer-section a[href^="tel:"] {
            display: flex;
            align-items: center;
            gap: var(--space-2);
        }

        .footer-bottom {
            text-align: center;
            padding-top: var(--space-8);
            border-top: 1px solid var(--border-subtle);
            color: var(--text-muted);
            font-size: var(--text-sm);
        }

        .footer-bottom a {
            color: var(--brand-primary);
            text-decoration: none;
            transition: color var(--duration-fast) var(--ease-out);
        }

        .footer-bottom a:hover,
        .footer-bottom a:focus-visible {
            color: var(--brand-primary-light);
        }

        /* === SCROLL TO TOP - Enhanced UX === */
        .scroll-to-top {
            position: fixed;
            bottom: var(--space-8);
            right: var(--space-8);
            width: 48px;
            height: 48px;
            background: var(--brand-primary);
            color: var(--text-inverse);
            border: none;
            border-radius: 50%;
            cursor: pointer;
            font-size: var(--text-lg);
            transition: all var(--duration-normal) var(--ease-out);
            z-index: var(--z-banner);
            opacity: 0;
            visibility: hidden;
            transform: translateY(20px) scale(0.8);
            box-shadow: var(--shadow-lg);
        }

        .scroll-to-top.visible {
            opacity: 1;
            visibility: visible;
            transform: translateY(0) scale(1);
        }

        .scroll-to-top:hover,
        .scroll-to-top:focus-visible {
            background: var(--brand-primary-light);
            transform: translateY(-2px) scale(1.05);
            box-shadow: var(--shadow-brand);
        }

        /* === ANIMATION SYSTEM === */
        .fade-in {
            opacity: 0;
            transform: translateY(20px);
            transition: all var(--duration-slower) var(--ease-out);
        }

        .fade-in.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .slide-in-left {
            opacity: 0;
            transform: translateX(-30px);
            transition: all var(--duration-slower) var(--ease-out);
        }

        .slide-in-left.visible {
            opacity: 1;
            transform: translateX(0);
        }

        .slide-in-right {
            opacity: 0;
            transform: translateX(30px);
            transition: all var(--duration-slower) var(--ease-out);
        }

        .slide-in-right.visible {
            opacity: 1;
            transform: translateX(0);
        }

        /* === RESPONSIVE DESIGN - Mobile-First Enhanced === */
        @media (max-width: 768px) {
            .nav-menu {
                position: absolute;
                top: 100%;
                left: 0;
                width: 100%;
                background: var(--bg-overlay);
                backdrop-filter: blur(16px);
                flex-direction: column;
                gap: 0;
                padding: var(--space-6) 0;
                box-shadow: var(--shadow-xl);
                border-top: 1px solid var(--border-subtle);
                transform: translateY(-10px);
                opacity: 0;
                visibility: hidden;
                transition: all var(--duration-normal) var(--ease-out);
            }
            
            .nav-menu.active {
                transform: translateY(0);
                opacity: 1;
                visibility: visible;
            }
            
            .nav-menu a {
                padding: var(--space-4) var(--space-6);
                border-bottom: 1px solid var(--border-subtle);
                text-align: center;
                width: 100%;
            }

            .nav-menu a:last-child {
                border-bottom: none;
            }
            
            .nav-toggle {
                display: block;
            }

            .hero {
                min-height: 100vh;
                padding: var(--space-20) 0 var(--space-16);
            }

            .hero-cta {
                flex-direction: column;
                align-items: center;
            }

            .btn {
                width: 100%;
                max-width: 280px;
                justify-content: center;
            }

            .card-grid {
                grid-template-columns: 1fr;
                gap: var(--space-6);
            }

            .bio-content {
                grid-template-columns: 1fr;
                gap: var(--space-12);
            }

            .bio-image {
                max-width: 300px;
                margin: 0 auto;
            }

            .footer-content {
                grid-template-columns: 1fr;
                text-align: center;
                gap: var(--space-8);
            }

            .scroll-to-top {
                bottom: var(--space-6);
                right: var(--space-6);
                width: 44px;
                height: 44px;
            }

            /* Disable hover effects on touch devices */
            .card:hover,
            .event-card:hover {
                transform: none;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 0 var(--space-4);
            }

            .nav-container {
                padding: 0 var(--space-4);
            }

            .hero-content {
                padding: 0 var(--space-4);
            }

            .card,
            .event-card {
                padding: var(--space-6);
            }

            .section {
                padding: var(--space-16) 0;
            }
        }

        /* === ACCESSIBILITY ENHANCEMENTS === */
        @media (prefers-reduced-motion: reduce) {
            *,
            *::before,
            *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
                scroll-behavior: auto !important;
            }

            .fade-in,
            .slide-in-left,
            .slide-in-right {
                opacity: 1 !important;
                transform: none !important;
            }
        }

        @media (prefers-contrast: high) {
            :root {
                --text-secondary: var(--neutral-50);
                --text-muted: var(--neutral-200);
                --border-subtle: var(--neutral-600);
                --bg-tertiary: var(--neutral-950);
                --brand-primary: #ffff00;
                --brand-primary-light: #ffff99;
            }

            .card,
            .event-card {
                border: 2px solid var(--border-strong) !important;
            }
        }

        /* Dark theme support */
        @media (prefers-color-scheme: dark) {
            /* Already optimized for dark theme */
        }

        /* === PRINT STYLES === */
        @media print {
            .navbar,
            .scroll-to-top,
            .nav-toggle,
            .skip-links {
                display: none !important;
            }

            .hero {
                min-height: auto !important;
                padding: var(--space-8) 0 !important;
                break-after: page;
            }

            .section {
                padding: var(--space-6) 0 !important;
                break-inside: avoid;
            }

            .card,
            .event-card {
                break-inside: avoid;
                border: 1px solid var(--neutral-400) !important;
                margin-bottom: var(--space-4) !important;
                box-shadow: none !important;
            }

            .hero-title,
            .section-title,
            .card-title,
            .event-title {
                color: var(--neutral-950) !important;
            }

            .hero-description,
            .section-subtitle,
            .card-description,
            .event-description,
            .bio-text {
                color: var(--neutral-700) !important;
            }

            .footer {
                border-top: 2px solid var(--neutral-400) !important;
            }

            a[href]:after {
                content: " (" attr(href) ")";
                font-size: var(--text-xs);
                color: var(--neutral-600);
            }

            a[href^="#"]:after,
            a[href^="javascript:"]:after {
                content: "";
            }
        }

        /* === LOADING STATES - Better UX === */
        .loading {
            opacity: 0.7;
            pointer-events: none;
            position: relative;
        }

        .loading::after {
            content: '';
            position: absolute;
            inset: 0;
            background: var(--bg-overlay);
            backdrop-filter: blur(2px);
            border-radius: inherit;
        }

        /* === ERROR STATES === */
        .error {
            color: #ef4444;
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.2);
            padding: var(--space-4);
            border-radius: var(--radius-md);
            font-size: var(--text-sm);
        }

        /* === UTILITY CLASSES === */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        .visually-hidden {
            clip: rect(0 0 0 0);
            clip-path: inset(50%);
            height: 1px;
            overflow: hidden;
            position: absolute;
            white-space: nowrap;
            width: 1px;
        }

        .text-balance {
            text-wrap: balance;
        }

        .text-pretty {
            text-wrap: pretty;
        }
    </style>
</head>

<body>
    <!-- Skip Links for Enhanced Accessibility -->
    <div class="skip-links">
        <a href="#main-content" class="skip-link">Aller au contenu principal</a>
        <a href="#navigation" class="skip-link">Aller à la navigation</a>
        <a href="#contact" class="skip-link">Aller aux informations de contact</a>
    </div>

    <!-- Navigation -->
    <nav class="navbar" id="navigation" role="navigation" aria-label="Navigation principale">
        <div class="nav-container">
            <a href="#accueil" class="logo" aria-label="Jean-David Waeber - Retour à l'accueil">
                Jean-David Waeber
            </a>
            
            <button class="nav-toggle" 
                    id="nav-toggle" 
                    aria-label="Ouvrir le menu de navigation" 
                    aria-expanded="false"
                    aria-controls="nav-menu">
                <i class="fas fa-bars" aria-hidden="true"></i>
            </button>
            
            <ul class="nav-menu" id="nav-menu" role="menubar">
                <li role="none">
                    <a href="#accueil" class="active" role="menuitem" aria-current="page">Accueil</a>
                </li>
                <li role="none">
                    <a href="#activites" role="menuitem">Activités</a>
                </li>
                <li role="none">
                    <a href="#biographie" role="menuitem">Biographie</a>
                </li>
                <li role="none">
                    <a href="#agenda" role="menuitem">Agenda</a>
                </li>
                <li role="none">
                    <a href="#contact" role="menuitem">Contact</a>
                </li>
            </ul>
        </div>
    </nav>

    <!-- Main Content -->
    <main id="main-content" role="main">
        <!-- Hero Section -->
        <section class="hero" id="accueil" aria-labelledby="hero-title">
            <div class="hero-content">
                <div class="hero-badge">
                    <i class="fas fa-music" aria-hidden="true"></i>
                    <span>Organiste & Chef de Chœur</span>
                </div>
                <h1 class="hero-title text-balance" id="hero-title">Jean-David Waeber</h1>
                <p class="hero-description text-pretty">
                    Organiste professionnel et chef de chœur à la cathédrale de Sion, je dédie ma passion à la transmission 
                    du patrimoine musical sacré et à la création contemporaine.
                </p>
                <div class="hero-cta">
                    <a href="#agenda" class="btn btn-primary" aria-describedby="hero-cta-desc">
                        <i class="fas fa-calendar-alt" aria-hidden="true"></i>
                        <span>Prochains concerts</span>
                    </a>
                    <a href="#contact" class="btn btn-secondary">
                        <i class="fas fa-envelope" aria-hidden="true"></i>
                        <span>Contact</span>
                    </a>
                </div>
                <div id="hero-cta-desc" class="sr-only">
                    Découvrir les prochains concerts et événements de Jean-David Waeber
                </div>
            </div>
        </section>

        <!-- Activities Section -->
        <section class="section" id="activites" aria-labelledby="activities-title">
            <div class="container">
                <header class="section-header">
                    <h2 class="section-title text-balance" id="activities-title">Mes activités</h2>
                    <p class="section-subtitle text-pretty">
                        Direction, interprétation, composition et enseignement au service de la musique sacrée
                    </p>
                </header>
                
                <div class="card-grid" role="list" aria-label="Liste des activités principales">
                    <article class="card fade-in" role="listitem" tabindex="0">
                        <div class="card-icon" aria-hidden="true">
                            <i class="fas fa-music"></i>
                        </div>
                        <h3 class="card-title">Direction</h3>
                        <p class="card-description">
                            Direction du chœur Oracantat de Sion et des ensembles de la Maîtrise cathédrale. 
                            Spécialisation dans le répertoire sacré, du chant grégorien aux œuvres contemporaines.
                        </p>
                    </article>
                    
                    <article class="card fade-in" role="listitem" tabindex="0">
                        <div class="card-icon" aria-hidden="true">
                            <i class="fas fa-piano"></i>
                        </div>
                        <h3 class="card-title">Interprétation</h3>
                        <p class="card-description">
                            Interprétation soliste et musique de chambre. Formation approfondie dans la tradition 
                            baroque et la pratique historiquement informée.
                        </p>
                    </article>
                    
                    <article class="card fade-in" role="listitem" tabindex="0">
                        <div class="card-icon" aria-hidden="true">
                            <i class="fas fa-feather-alt"></i>
                        </div>
                        <h3 class="card-title">Composition</h3>
                        <p class="card-description">
                            Création d'œuvres originales pour orgue, chœur et formations de chambre, 
                            alliant respect de la tradition et sensibilité contemporaine.
                        </p>
                    </article>
                    
                    <article class="card fade-in" role="listitem" tabindex="0">
                        <div class="card-icon" aria-hidden="true">
                            <i class="fas fa-graduation-cap"></i>
                        </div>
                        <h3 class="card-title">Enseignement</h3>
                        <p class="card-description">
                            Enseignement musical au Lycée-Collège des Creusets et direction de l'École 
                            maîtrisienne de la cathédrale de Sion.
                        </p>
                    </article>
                </div>
            </div>
        </section>

        <!-- Biography Section -->
        <section class="section section-alt" id="biographie" aria-labelledby="bio-title">
            <div class="container">
                <header class="section-header">
                    <h2 class="section-title text-balance" id="bio-title">Biographie</h2>
                    <p class="section-subtitle text-pretty">
                        Un parcours dédié à l'excellence musicale et à la transmission
                    </p>
                </header>
                
                <div class="bio-content">
                    <div class="bio-image" role="img" aria-label="Portrait de Jean-David Waeber">
                        <span aria-hidden="true">Photo de Jean-David Waeber</span>
                    </div>
                    <div class="bio-text fade-in">
                        <p class="text-pretty">
                            Formé aux conservatoires de Lausanne et Genève, Jean-David Waeber s'est spécialisé 
                            dans la musique sacrée et la direction chorale. Sa passion pour le répertoire 
                            grégorien et la polyphonie Renaissance l'a mené à approfondir ses connaissances 
                            auprès des maîtres européens.
                        </p>
                        <p class="text-pretty">
                            En tant qu'organiste professionnel et chef de chœur à la cathédrale de Sion, 
                            il développe une approche pédagogique innovante, alliant tradition et modernité. 
                            Son travail avec les jeunes chanteurs de la maîtrise cathédrale témoigne de son 
                            engagement pour la transmission du patrimoine musical.
                        </p>
                        <p class="text-pretty">
                            Compositeur reconnu, ses œuvres sont régulièrement interprétées dans les 
                            cathédrales suisses et européennes. Il collabore avec de nombreux ensembles 
                            spécialisés dans la musique ancienne et contemporaine.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Events Section -->
        <section class="section" id="agenda" aria-labelledby="events-title">
            <div class="container">
                <header class="section-header">
                    <h2 class="section-title text-balance" id="events-title">Prochains événements</h2>
                    <p class="section-subtitle text-pretty">
                        Concerts, récitals et événements liturgiques à venir
                    </p>
                </header>
                
                <div class="card-grid" role="list" aria-label="Liste des prochains événements">
                    <article class="event-card fade-in" role="listitem">
                        <time class="event-date" datetime="2025-08-15T17:00">
                            Dimanche 15 Août 2025 - 17h00
                        </time>
                        <h3 class="event-title">Concert d'été</h3>
                        <div class="event-location">
                            <i class="fas fa-map-marker-alt" aria-hidden="true"></i>
                            <span>Cathédrale de Sion</span>
                        </div>
                        <p class="event-description text-pretty">
                            Concert estival avec la Maîtrise cathédrale présentant des œuvres de Palestrina, 
                            Victoria et créations contemporaines. Une soirée dédiée à la beauté du chant sacré.
                        </p>
                    </article>
                    
                    <article class="event-card slide-in-right" role="listitem">
                        <time class="event-date" datetime="2025-09-10T20:00">
                            Vendredi 10 Septembre 2025 - 20h00
                        </time>
                        <h3 class="event-title">Récital d'orgue</h3>
                        <div class="event-location">
                            <i class="fas fa-map-marker-alt" aria-hidden="true"></i>
                            <span>Église Saint-Théodule</span>
                        </div>
                        <p class="event-description text-pretty">
                            Récital solo présentant des œuvres de Bach, Buxtehude et compositions personnelles. 
                            Un voyage musical à travers les siècles de la littérature organistique.
                        </p>
                    </article>
                    
                    <article class="event-card fade-in" role="listitem">
                        <time class="event-date" datetime="2025-10-05T19:30">
                            Dimanche 5 Octobre 2025 - 19h30
                        </time>
                        <h3 class="event-title">Cantate de Bach</h3>
                        <div class="event-location">
                            <i class="fas fa-map-marker-alt" aria-hidden="true"></i>
                            <span>Cathédrale de Sion</span>
                        </div>
                        <p class="event-description text-pretty">
                            Série mensuelle dédiée aux cantates de J.S. Bach avec orchestre baroque et solistes. 
                            Découverte approfondie du génie bachien dans son contexte liturgique.
                        </p>
                    </article>
                </div>
                
                <div style="text-align: center; margin-top: var(--space-16);">
                    <a href="#contact" class="btn btn-primary fade-in">
                        <i class="fas fa-ticket-alt" aria-hidden="true"></i>
                        <span>Réserver vos places</span>
                    </a>
                </div>
            </div>
        </section>

        <!-- Contact Section -->
        <section class="section section-alt" id="contact" aria-labelledby="contact-title">
            <div class="container">
                <header class="section-header">
                    <h2 class="section-title text-balance" id="contact-title">Contact</h2>
                    <p class="section-subtitle text-pretty">
                        Pour toute information ou collaboration
                    </p>
                </header>
                
                <div class="footer-content">
                    <div class="footer-section fade-in">
                        <h4>Coordonnées</h4>
                        <address style="font-style: normal;">
                            <p>
                                Cathédrale de Sion<br>
                                Place de la Cathédrale<br>
                                1950 Sion, Valais, Suisse
                            </p>
                            <a href="mailto:info@jdwaeber.ch" 
                               aria-label="Envoyer un email à Jean-David Waeber">
                                <i class="fas fa-envelope" aria-hidden="true"></i>
                                <span>info@jdwaeber.ch</span>
                            </a>
                            <a href="tel:+41276221231" 
                               aria-label="Appeler Jean-David Waeber">
                                <i class="fas fa-phone" aria-hidden="true"></i>
                                <span>+41 (0)27 622 12 31</span>
                            </a>
                        </address>
                    </div>
                    
                    <div class="footer-section fade-in">
                        <h4>Enseignement</h4>
                        <p>
                            <strong>Lycée-Collège des Creusets</strong><br>
                            Formation musicale avancée<br>
                            Sion, Valais
                        </p>
                        <p>
                            <strong>École maîtrisienne</strong><br>
                            Cathédrale de Sion<br>
                            Direction pédagogique
                        </p>
                    </div>
                    
                    <div class="footer-section fade-in">
                        <h4>Suivez-moi</h4>
                        <a href="https://linkedin.com/in/jdwaeber" 
                           target="_blank" 
                           rel="noopener noreferrer"
                           aria-label="Profil LinkedIn de Jean-David Waeber (ouvre dans un nouvel onglet)">
                            <i class="fab fa-linkedin" aria-hidden="true"></i>
                            <span>LinkedIn</span>
                        </a>
                        <a href="mailto:info@jdwaeber.ch?subject=Newsletter" 
                           aria-label="S'abonner à la newsletter par email">
                            <i class="fas fa-envelope-open" aria-hidden="true"></i>
                            <span>Newsletter</span>
                        </a>
                        <a href="https://youtube.com/@jdwaeber" 
                           target="_blank" 
                           rel="noopener noreferrer"
                           aria-label="Chaîne YouTube de Jean-David Waeber (ouvre dans un nouvel onglet)">
                            <i class="fab fa-youtube" aria-hidden="true"></i>
                            <span>YouTube</span>
                        </a>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer" role="contentinfo">
        <div class="container">
            <div class="footer-bottom">
                <p>
                    &copy; 2025 Jean-David Waeber. Tous droits réservés. | 
                    <a href="#mentions-legales" aria-label="Consulter les mentions légales">Mentions légales</a> | 
                    <a href="#politique-confidentialite" aria-label="Consulter la politique de confidentialité">Politique de confidentialité</a>
                </p>
            </div>
        </div>
    </footer>

    <!-- Scroll to top button -->
    <button class="scroll-to-top" id="scroll-to-top" aria-label="Retour en haut de page">
        <i class="fas fa-chevron-up" aria-hidden="true"></i>
    </button>

    <script>
        /**
         * SENIOR UX ARCHITECTURE - PRODUCTION OPTIMIZED
         * @author Senior Full-Stack Developer
         * @version 2.0
         * @description Performance-first, accessibility-compliant, error-resilient
         */
        
        /**
         * SENIOR UX ARCHITECTURE - PRODUCTION OPTIMIZED
         * @author Senior Full-Stack Developer
         * @version 2.0
         * @description Performance-first, accessibility-compliant, error-resilient
         */
        
        class SeniorUXArchitecture {
            constructor() {
                // Core Elements
                this.navbar = document.querySelector('.navbar');
                this.navToggle = document.getElementById('nav-toggle');
                this.navMenu = document.getElementById('nav-menu');
                this.scrollToTopBtn = document.getElementById('scroll-to-top');
                
                // State Management
                this.state = {
                    isMenuOpen: false,
                    lastScrollY: window.scrollY,
                    isScrolling: false,
                    reducedMotion: window.matchMedia('(prefers-reduced-motion: reduce)').matches,
                    touchDevice: 'ontouchstart' in window || navigator.maxTouchPoints > 0
                };
                
                // Performance Optimizations
                this.throttledScroll = this.throttle(this.handleScroll.bind(this), 16);
                this.debouncedResize = this.debounce(this.handleResize.bind(this), 250);
                
                // Error Boundary
                this.initializeWithErrorHandling();
            }

            /**
             * Initialize with comprehensive error handling
             */
            initializeWithErrorHandling() {
                try {
                    this.setupNavigation();
                    this.setupScrollEffects();
                    this.setupAnimations();
                    this.setupAccessibility();
                    this.setupPerformanceOptimizations();
                    this.announceToScreenReader('Application chargée avec succès');
                    
                    if (window.performance?.mark) {
                        window.performance.mark('ux-architecture-initialized');
                    }
                    
                    this.safeConsoleLog('✨ Senior UX Architecture initialized successfully');
                } catch (error) {
                    this.safeConsoleError('❌ UX Architecture initialization failed:');
                    this.safeConsoleError(error);
                    this.initializeFallback();
                }
            }

            /**
             * Fallback initialization for critical functionality
             */
            initializeFallback() {
                this.safeConsoleWarn('🔄 Activating fallback mode...');
                
                // Essential navigation fallback
                if (this.navToggle && this.navMenu) {
                    this.navToggle.addEventListener('click', () => {
                        this.state.isMenuOpen = !this.state.isMenuOpen;
                        this.navMenu.classList.toggle('active', this.state.isMenuOpen);
                        this.navToggle.setAttribute('aria-expanded', this.state.isMenuOpen);
                    });
                }

                // Essential scroll to top fallback
                if (this.scrollToTopBtn) {
                    this.scrollToTopBtn.addEventListener('click', () => {
                        window.scrollTo({ top: 0, behavior: 'smooth' });
                    });
                }

                // Show all animations immediately
                document.querySelectorAll('.fade-in, .slide-in-left, .slide-in-right').forEach(el => {
                    el.classList.add('visible');
                });
            }

            /**
             * Enhanced Navigation Setup
             */
            setupNavigation() {
                if (!this.navToggle || !this.navMenu || !this.navbar) return;

                // Mobile menu toggle with enhanced accessibility
                this.navToggle.addEventListener('click', this.handleMenuToggle.bind(this));
                
                // Enhanced keyboard navigation
                this.setupKeyboardNavigation();
                
                // Smooth scrolling for anchor links
                this.setupSmoothScrolling();
                
                // Scroll-based navbar behavior
                window.addEventListener('scroll', this.throttledScroll, { passive: true });
                
                // Close menu on outside click
                document.addEventListener('click', this.handleOutsideClick.bind(this));
                
                // Handle window resize
                window.addEventListener('resize', this.debouncedResize);
            }

            /**
             * Handle mobile menu toggle with full accessibility
             */
            handleMenuToggle(e) {
                e.preventDefault();
                e.stopPropagation();
                
                this.state.isMenuOpen = !this.state.isMenuOpen;
                
                // Update DOM
                this.navMenu.classList.toggle('active', this.state.isMenuOpen);
                this.navToggle.setAttribute('aria-expanded', this.state.isMenuOpen);
                
                // Update icon with smooth transition
                const icon = this.navToggle.querySelector('i');
                if (icon) {
                    icon.style.transform = 'rotate(180deg)';
                    setTimeout(() => {
                        icon.className = this.state.isMenuOpen ? 'fas fa-times' : 'fas fa-bars';
                        icon.style.transform = 'rotate(0deg)';
                    }, 150);
                }
                
                // Prevent body scroll when menu is open
                document.body.style.overflow = this.state.isMenuOpen ? 'hidden' : '';
                
                // Focus management
                if (this.state.isMenuOpen) {
                    this.setupFocusTrap();
                    this.announceToScreenReader('Menu ouvert');
                } else {
                    this.announceToScreenReader('Menu fermé');
                }
            }

            /**
             * Enhanced keyboard navigation
             */
            setupKeyboardNavigation() {
                // Escape key to close menu
                document.addEventListener('keydown', (e) => {
                    if (e.key === 'Escape' && this.state.isMenuOpen) {
                        this.closeMenu();
                        this.navToggle.focus();
                    }
                });

                // Tab key visual indicator
                document.addEventListener('keydown', (e) => {
                    if (e.key === 'Tab') {
                        document.body.classList.add('keyboard-navigation');
                    }
                });

                document.addEventListener('mousedown', () => {
                    document.body.classList.remove('keyboard-navigation');
                });
            }

            /**
             * Setup focus trap for mobile menu
             */
            setupFocusTrap() {
                const focusableElements = this.navMenu.querySelectorAll(
                    'a, button, [tabindex]:not([tabindex="-1"])'
                );
                
                if (focusableElements.length === 0) return;
                
                const firstElement = focusableElements[0];
                const lastElement = focusableElements[focusableElements.length - 1];

                const handleTabKey = (e) => {
                    if (e.key !== 'Tab' || !this.state.isMenuOpen) return;

                    if (e.shiftKey) {
                        if (document.activeElement === firstElement) {
                            e.preventDefault();
                            lastElement.focus();
                        }
                    } else {
                        if (document.activeElement === lastElement) {
                            e.preventDefault();
                            firstElement.focus();
                        }
                    }
                };

                document.addEventListener('keydown', handleTabKey);
                firstElement.focus();

                // Cleanup when menu closes
                const cleanup = () => {
                    if (!this.state.isMenuOpen) {
                        document.removeEventListener('keydown', handleTabKey);
                    }
                };
                setTimeout(cleanup, 100);
            }

            /**
             * Enhanced smooth scrolling with active link management
             */
            setupSmoothScrolling() {
                document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                    anchor.addEventListener('click', (e) => {
                        e.preventDefault();
                        const targetId = anchor.getAttribute('href');
                        if (targetId === '#') return;
                        
                        const target = document.querySelector(targetId);
                        if (!target) return;

                        // Close mobile menu if open
                        if (this.state.isMenuOpen) {
                            this.closeMenu();
                        }

                        // Calculate scroll position
                        const navHeight = this.navbar?.offsetHeight || 80;
                        const targetPosition = target.offsetTop - navHeight - 20;
                        
                        // Smooth scroll
                        window.scrollTo({
                            top: targetPosition,
                            behavior: this.state.reducedMotion ? 'auto' : 'smooth'
                        });

                        // Update active navigation link
                        this.updateActiveNavLink(targetId);
                        
                        // Focus management for accessibility
                        setTimeout(() => {
                            target.setAttribute('tabindex', '-1');
                            target.focus({ preventScroll: true });
                            target.addEventListener('blur', () => {
                                target.removeAttribute('tabindex');
                            }, { once: true });
                        }, this.state.reducedMotion ? 0 : 500);
                    });
                });
            }

            /**
             * Update active navigation link
             */
            updateActiveNavLink(targetId) {
                document.querySelectorAll('.nav-menu a').forEach(link => {
                    link.classList.remove('active');
                    link.removeAttribute('aria-current');
                });
                
                const activeLink = document.querySelector(`.nav-menu a[href="${targetId}"]`);
                if (activeLink) {
                    activeLink.classList.add('active');
                    activeLink.setAttribute('aria-current', 'page');
                }
            }

            /**
             * Handle scroll events with performance optimization
             */
            handleScroll() {
                if (this.state.isScrolling) return;
                this.state.isScrolling = true;

                requestAnimationFrame(() => {
                    const currentScrollY = window.scrollY;
                    
                    // Update navbar appearance
                    if (this.navbar) {
                        if (currentScrollY > 50) {
                            this.navbar.classList.add('scrolled');
                        } else {
                            this.navbar.classList.remove('scrolled');
                        }
                    }

                    // Update scroll to top button
                    if (this.scrollToTopBtn) {
                        if (currentScrollY > 300) {
                            this.scrollToTopBtn.classList.add('visible');
                        } else {
                            this.scrollToTopBtn.classList.remove('visible');
                        }
                    }

                    this.state.lastScrollY = currentScrollY;
                    this.state.isScrolling = false;
                });
            }

            /**
             * Close mobile menu
             */
            closeMenu() {
                if (!this.state.isMenuOpen) return;
                
                this.state.isMenuOpen = false;
                this.navMenu.classList.remove('active');
                this.navToggle.setAttribute('aria-expanded', 'false');
                document.body.style.overflow = '';
                
                const icon = this.navToggle.querySelector('i');
                if (icon) {
                    icon.className = 'fas fa-bars';
                }
            }

            /**
             * Handle outside clicks
             */
            handleOutsideClick(e) {
                if (this.state.isMenuOpen && 
                    !this.navToggle.contains(e.target) && 
                    !this.navMenu.contains(e.target)) {
                    this.closeMenu();
                }
            }

            /**
             * Handle window resize
             */
            handleResize() {
                // Close mobile menu on desktop resize
                if (window.innerWidth > 768 && this.state.isMenuOpen) {
                    this.closeMenu();
                }
            }

            /**
             * Setup scroll effects
             */
            setupScrollEffects() {
                // Scroll to top functionality
                if (this.scrollToTopBtn) {
                    this.scrollToTopBtn.addEventListener('click', () => {
                        window.scrollTo({
                            top: 0,
                            behavior: this.state.reducedMotion ? 'auto' : 'smooth'
                        });
                        this.announceToScreenReader('Retour en haut de page');
                    });
                }
            }

            /**
             * Setup animations with Intersection Observer
             */
            setupAnimations() {
                if (this.state.reducedMotion) {
                    // Skip animations for users who prefer reduced motion
                    document.querySelectorAll('.fade-in, .slide-in-left, .slide-in-right').forEach(el => {
                        el.classList.add('visible');
                    });
                    return;
                }

                if (!window.IntersectionObserver) {
                    // Fallback for older browsers
                    document.querySelectorAll('.fade-in, .slide-in-left, .slide-in-right').forEach(el => {
                        el.classList.add('visible');
                    });
                    return;
                }

                const observerOptions = {
                    threshold: 0.1,
                    rootMargin: '0px 0px -50px 0px'
                };

                const observer = new IntersectionObserver((entries) => {
                    entries.forEach((entry, index) => {
                        if (entry.isIntersecting) {
                            // Stagger animations for better UX
                            setTimeout(() => {
                                entry.target.classList.add('visible');
                            }, index * 100);
                            observer.unobserve(entry.target);
                        }
                    });
                }, observerOptions);

                document.querySelectorAll('.fade-in, .slide-in-left, .slide-in-right').forEach(el => {
                    observer.observe(el);
                });
            }

            /**
             * Enhanced accessibility setup
             */
            setupAccessibility() {
                // Skip links functionality
                document.querySelectorAll('.skip-link').forEach(skipLink => {
                    skipLink.addEventListener('click', (e) => {
                        e.preventDefault();
                        const target = document.querySelector(skipLink.getAttribute('href'));
                        if (target) {
                            target.focus();
                            target.scrollIntoView({ 
                                behavior: this.state.reducedMotion ? 'auto' : 'smooth',
                                block: 'start'
                            });
                        }
                    });
                });

                // Enhanced focus management for cards
                document.querySelectorAll('.card, .event-card').forEach(card => {
                    card.addEventListener('keydown', (e) => {
                        if (e.key === 'Enter' || e.key === ' ') {
                            e.preventDefault();
                            // Trigger click event or specific action
                            const link = card.querySelector('a');
                            if (link) {
                                link.click();
                            } else {
                                // Visual feedback for activation
                                card.style.transform = 'scale(0.98)';
                                setTimeout(() => {
                                    card.style.transform = '';
                                }, 150);
                            }
                        }
                    });
                });

                // Announce important updates to screen readers
                setTimeout(() => {
                    this.announceToScreenReader('Page entièrement chargée. Navigation disponible.');
                }, 1000);
            }

            /**
             * Screen reader announcements
             */
            announceToScreenReader(message) {
                const announcer = document.createElement('div');
                announcer.setAttribute('aria-live', 'polite');
                announcer.setAttribute('aria-atomic', 'true');
                announcer.className = 'sr-only';
                announcer.textContent = message;
                
                document.body.appendChild(announcer);
                
                setTimeout(() => {
                    if (announcer.parentNode) {
                        announcer.parentNode.removeChild(announcer);
                    }
                }, 1000);
            }

            /**
             * Performance optimizations
             */
            setupPerformanceOptimizations() {
                // Lazy load images when they enter viewport
                if ('IntersectionObserver' in window) {
                    const imageObserver = new IntersectionObserver((entries) => {
                        entries.forEach(entry => {
                            if (entry.isIntersecting) {
                                const img = entry.target;
                                if (img.dataset.src) {
                                    img.src = img.dataset.src;
                                    img.removeAttribute('data-src');
                                    img.classList.remove('loading');
                                    imageObserver.unobserve(img);
                                }
                            }
                        });
                    });

                    document.querySelectorAll('img[data-src]').forEach(img => {
                        imageObserver.observe(img);
                    });
                }

                // Preload critical resources
                this.preloadCriticalResources();

                // Performance monitoring
                this.monitorPerformance();
            }

            /**
             * Preload critical resources
             */
            preloadCriticalResources() {
                // Preload important images
                const criticalImages = [
                    // Add critical image URLs here
                ];

                criticalImages.forEach(src => {
                    const link = document.createElement('link');
                    link.rel = 'preload';
                    link.as = 'image';
                    link.href = src;
                    document.head.appendChild(link);
                });
            }

            /**
             * Performance monitoring
             */
            monitorPerformance() {
                if (!('performance' in window)) return;

                window.addEventListener('load', () => {
                    setTimeout(() => {
                        try {
                            const navigation = performance.getEntriesByType('navigation')[0];
                            if (navigation) {
                                const metrics = {
                                    loadTime: Math.round(navigation.loadEventEnd - navigation.fetchStart),
                                    domContentLoaded: Math.round(navigation.domContentLoadedEventEnd - navigation.fetchStart),
                                    firstPaint: this.getFirstPaint(),
                                    largestContentfulPaint: this.getLCP()
                                };

                                this.safeConsoleGroup('🚀 Performance Metrics');
                                this.safeConsoleLog(`Total Load Time: ${metrics.loadTime}ms`);
                                this.safeConsoleLog(`DOM Content Loaded: ${metrics.domContentLoaded}ms`);
                                if (metrics.firstPaint) this.safeConsoleLog(`First Paint: ${metrics.firstPaint}ms`);
                                if (metrics.largestContentfulPaint) this.safeConsoleLog(`LCP: ${metrics.largestContentfulPaint}ms`);
                                this.safeConsoleGroupEnd();

                                // Alert if performance is poor
                                if (metrics.loadTime > 3000) {
                                    this.safeConsoleWarn('⚠️ Slow page load detected. Consider optimizations.');
                                }
                            }
                        } catch (e) {
                            // Silent fail for performance monitoring
                        }
                    }, 0);
                });
            }

            /**
             * Get First Paint metric
             */
            getFirstPaint() {
                const paintEntries = performance.getEntriesByType('paint');
                const firstPaint = paintEntries.find(entry => entry.name === 'first-paint');
                return firstPaint ? Math.round(firstPaint.startTime) : null;
            }

            /**
             * Safe console methods with fallbacks
             */
            safeConsoleLog(message) {
                if (typeof console !== 'undefined' && console.log) {
                    console.log(message);
                }
            }

            safeConsoleWarn(message) {
                if (typeof console !== 'undefined' && console.warn) {
                    console.warn(message);
                } else {
                    this.safeConsoleLog(`⚠️ ${message}`);
                }
            }

            safeConsoleError(message) {
                if (typeof console !== 'undefined' && console.error) {
                    console.error(message);
                } else {
                    this.safeConsoleLog(`❌ ${message}`);
                }
            }

            safeConsoleGroup(label) {
                if (typeof console !== 'undefined' && console.group) {
                    console.group(label);
                } else {
                    this.safeConsoleLog(`\n--- ${label} ---`);
                }
            }

            safeConsoleGroupEnd() {
                if (typeof console !== 'undefined' && console.groupEnd) {
                    console.groupEnd();
                } else {
                    this.safeConsoleLog('--- End ---\n');
                }
            }
            getLCP() {
                return new Promise((resolve) => {
                    if ('PerformanceObserver' in window) {
                        const observer = new PerformanceObserver((list) => {
                            const entries = list.getEntries();
                            const lastEntry = entries[entries.length - 1];
                            resolve(Math.round(lastEntry.startTime));
                            observer.disconnect();
                        });
                        observer.observe({ entryTypes: ['largest-contentful-paint'] });
                        
                        // Timeout after 10 seconds
                        setTimeout(() => {
                            observer.disconnect();
                            resolve(null);
                        }, 10000);
                    } else {
                        resolve(null);
                    }
                });
            }

            /**
             * Throttle function for performance
             */
            throttle(func, limit) {
                let inThrottle;
                return function(...args) {
                    if (!inThrottle) {
                        func.apply(this, args);
                        inThrottle = true;
                        setTimeout(() => inThrottle = false, limit);
                    }
                };
            }

            /**
             * Debounce function for performance
             */
            debounce(func, delay) {
                let timeoutId;
                return function(...args) {
                    clearTimeout(timeoutId);
                    timeoutId = setTimeout(() => func.apply(this, args), delay);
                };
            }

            /**
             * Cleanup method for proper memory management
             */
            destroy() {
                // Remove event listeners
                window.removeEventListener('scroll', this.throttledScroll);
                window.removeEventListener('resize', this.debouncedResize);
                document.removeEventListener('click', this.handleOutsideClick);
                
                // Reset body styles
                document.body.style.overflow = '';
                
                // Clear any timeouts
                if (this.timeouts) {
                    this.timeouts.forEach(clearTimeout);
                }
                
                // Reset will-change properties
                document.querySelectorAll('[style*="will-change"]').forEach(el => {
                    el.style.willChange = 'auto';
                });
                
                this.safeConsoleLog('🧹 UX Architecture cleaned up');
            }
        }

        /**
         * Global error handling
         */
        class ErrorBoundary {
            static init() {
                // Global error handler
                window.addEventListener('error', (e) => {
                    const safeConsoleError = (msg) => {
                        if (typeof console !== 'undefined' && console.error) {
                            console.error(msg);
                        }
                    };
                    
                    safeConsoleError('🚨 Global Error: ' + JSON.stringify({
                        message: e.error?.message || e.message,
                        filename: e.filename,
                        lineno: e.lineno,
                        colno: e.colno
                    }));
                    
                    // Don't let errors break the user experience
                    e.preventDefault();
                });

                // Unhandled promise rejection handler
                window.addEventListener('unhandledrejection', (e) => {
                    const safeConsoleError = (msg) => {
                        if (typeof console !== 'undefined' && console.error) {
                            console.error(msg);
                        }
                    };
                    
                    safeConsoleError('🚨 Unhandled Promise Rejection: ' + String(e.reason));
                    e.preventDefault();
                });
            }
        }

        /**
         * Application initialization
         */
        document.addEventListener('DOMContentLoaded', () => {
            try {
                // Initialize error boundary
                ErrorBoundary.init();

                // Feature detection
                const features = {
                    intersectionObserver: 'IntersectionObserver' in window,
                    performanceObserver: 'PerformanceObserver' in window,
                    requestAnimationFrame: 'requestAnimationFrame' in window,
                    customProperties: CSS.supports('color', 'var(--test)'),
                    gridSupport: CSS.supports('display', 'grid')
                };

                // Safe console logging with fallbacks
                this.safeConsoleGroup('🔍 Feature Detection');
                Object.entries(features).forEach(([feature, supported]) => {
                    this.safeConsoleLog(`${feature}: ${supported ? '✅' : '❌'}`);
                });
                this.safeConsoleGroupEnd();

                // Polyfills
                if (!features.requestAnimationFrame) {
                    window.requestAnimationFrame = (callback) => setTimeout(callback, 16);
                }

                // Initialize main application
                window.uxApp = new SeniorUXArchitecture();
                
                // Mark initialization complete
                if (window.performance?.mark) {
                    window.performance.mark('app-initialized');
                }

                // Health check
                setTimeout(() => {
                    const healthCheck = {
                        navbar: !!document.querySelector('.navbar'),
                        hero: !!document.querySelector('.hero'),
                        cards: document.querySelectorAll('.card').length > 0,
                        events: document.querySelectorAll('.event-card').length > 0,
                        footer: !!document.querySelector('.footer'),
                        scrollButton: !!document.querySelector('.scroll-to-top')
                    };
                    
                    const failed = Object.entries(healthCheck).filter(([key, value]) => !value);
                    
                    if (failed.length > 0) {
                        console.warn('⚠️ Health Check Issues:', failed.map(([key]) => key));
                    } else {
                        console.log('✅ Health Check: All components loaded successfully');
                    }
                }, 1000);

            } catch (error) {
                console.error('💥 Critical initialization error:', error);
                
                // Emergency fallback
                document.querySelectorAll('.fade-in, .slide-in-left, .slide-in-right').forEach(el => {
                    el.style.opacity = '1';
                    el.style.transform = 'none';
                });

                // Basic mobile menu fallback
                const navToggle = document.getElementById('nav-toggle');
                const navMenu = document.getElementById('nav-menu');
                if (navToggle && navMenu) {
                    navToggle.addEventListener('click', () => {
                        navMenu.classList.toggle('active');
                    });
                }
            }
        });

        /**
         * Cleanup on page unload
         */
        window.addEventListener('beforeunload', () => {
            if (window.uxApp && typeof window.uxApp.destroy === 'function') {
                window.uxApp.destroy();
            }
        });

        /**
         * Service Worker registration for performance
         */
        if ('serviceWorker' in navigator && window.location.protocol === 'https:') {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then(registration => {
                        console.log('📦 Service Worker registered successfully');
                    })
                    .catch(error => {
                        console.log('📦 Service Worker registration failed:', error);
                    });
            });
        }
    </script>
</body>
</html>